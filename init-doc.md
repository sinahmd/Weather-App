 # مستندات صفحه وب وضعیت آب و هوا

## 1. تحقیقات عمومی

### 1.1 هدف تحقیق

هدف از این پروژه ایجاد یک صفحه وب آب و هوا است که داده ها را از یک API ساختگی بازیابی می کند و اطلاعات آب و هوا را برای یک شهر خاص نمایش می دهد. صفحه وب باید به کاربران امکان جستجوی یک شهر را بدهد و دما، رطوبت، فشار، نوع آب و هوا، سرعت باد، کشور و زمان غروب خورشید را برای شهر مشخص شده نمایش دهد.

### 1.2 پیشینه تحقیق

API های آب و هوا راه مناسبی برای دسترسی به داده های آب و هوا برای مکان های مختلف فراهم می کنند. این APIها به توسعه دهندگان این امکان را می دهند که اطلاعات آب و هوا مانند دما، رطوبت، فشار و شرایط آب و هوایی را برای یک شهر یا مکان خاص بازیابی کنند. با استفاده از API آب و هوا، توسعه دهندگان می توانند داده های آب و هوا را در زمان واقعی در برنامه های خود ادغام کنند و اطلاعات به روز آب و هوا را در اختیار کاربران قرار دهند.

### 1.3 روش تحقیق

برای ایجاد صفحه وب آب و هوا، توسعه دهنده از React.js، یک کتابخانه محبوب جاوا اسکریپت برای ساخت رابط کاربری استفاده کرده است. این پروژه از دو فایل اصلی تشکیل شده است: «searchMain.js» و «WeatherDetails.js». فایل `searchMain.js` مسئول رسیدگی به ورودی کاربر، ایجاد درخواست های API و به روز رسانی وضعیت با اطلاعات آب و هوای بازیابی شده است. فایل `WeatherDetails.js` یک مؤلفه کاربردی است که اطلاعات آب و هوا را به عنوان پروپوزال دریافت می کند و آن را به صورت قالب بندی شده نمایش می دهد.

## 2. متن اصلی

متن اصلی مستندات جزئیات پیاده سازی صفحه وب آب و هوا را پوشش می دهد. این شامل توضیحاتی در مورد قطعه کد ارائه شده در فایل های «searchMain.js» و «WeatherDetails.js» خواهد بود.

### 2.1 `searchMain.js`.

فایل `searchMain.js` جزء اصلی صفحه وب آب و هوا است. وابستگی های لازم را وارد می کند، متغیرهای حالت را تنظیم می کند و تابع «getWeatherInfo» را برای واکشی داده های آب و هوا از API تعریف می کند.

#### 2.1.1 `useState` هوک

قلاب "useState" برای تعریف دو متغیر حالت استفاده می شود: "searchTerm" و "tempInfo". متغیر "searchTerm" مقدار وارد شده توسط کاربر را در قسمت ورودی جستجو ذخیره می کند، در حالی که متغیر "tempInfo" اطلاعات آب و هوای بازیابی شده را ذخیره می کند.

#### 2.1.2 تابع `getWeatherInfo`.

تابع 'getWeatherInfo' یک تابع ناهمزمان است که یک درخواست API برای بازیابی داده های آب و هوا برای شهر مشخص شده ایجاد می کند. از تابع 'fetch' برای ارسال درخواست GET به OpenWeatherMap API استفاده می کند.

```javascript
const getWeatherInfo = async () => {
  try {
    let url = `https://api.openweathermap.org/data/2.5/weather?q=${searchTerm}&units=metric&appid=b070c3a5be570076714cf6cd1480e657`;
    let res = await fetch(url);
    let data = await res.json();
    // Extract weather information from the response
    const { temp, humidity, pressure } = data.main;
    const { main: weatherType } = data.weather[0];
    const { name } = data;
    const { speed } = data.wind;
    const { country, sunset } = data.sys;
    // Create a new weather info object
    const myNewWeatherInfo = {
      temp,
      humidity,
      pressure,
      weatherType,
      name,
      speed,
      country,
      sunset,
    };
    // Update the state with the new weather info
    setTempInfo(myNewWeatherInfo);
  } catch (error) {
    console.log(error);
  }
};
```

این تابع اطلاعات مربوط به آب و هوا را از پاسخ API استخراج می کند و یک شی جدید "myNewWeatherInfo" با داده های استخراج شده ایجاد می کند. سپس با استفاده از تابع "setTempInfo" وضعیت را با اطلاعات جدید آب و هوا به روز می کند.

#### 2.1.3 `useEffect` هوک

قلاب «useEffect» برای فراخوانی تابع «getWeatherInfo» هنگام نصب مؤلفه استفاده می‌شود. این تضمین می کند که هنگام بارگیری صفحه، داده های آب و هوا واکشی شده و نمایش داده می شود.

```javascript
useEffect(() => {
  getWeatherInfo();
}, []);
```

آرایه وابستگی خالی «[]» تضمین می‌کند که اثر فقط یک بار اجرا می‌شود، مشابه روش چرخه عمر «componentDidMount» در مؤلفه‌های کلاس.

#### 2.1.4 روش رندر

متد «رندر» مؤلفه «SearchMain» کد JSX را برمی‌گرداند که ساختار و طرح‌بندی صفحه وب آب‌وهوا را تعریف می‌کند. این شامل یک فیلد ورودی جستجو، یک دکمه جستجو و مؤلفه «Details Weather» برای نمایش اطلاعات آب و هوا است.

### 2.2 `WeatherDetails.js`.

فایل `WeatherDetails.js` یک مؤلفه کاربردی است که اطلاعات آب و هوا را به عنوان پروپوزال دریافت می کند و آن را به صورت قالب بندی شده نمایش می دهد. از قلاب های «useState» و «useEffect» برای تنظیم وضعیت و مدیریت نوع آب و هوا استفاده می کند.

#### 2.2.1 `useState` هوک

قلاب "useState" برای تعریف متغیر حالت "weatherState" استفاده می شود. این متغیر برای ذخیره کلاس CSS برای نماد آب و هوا بر اساس آب و هوا استفاده می شود
